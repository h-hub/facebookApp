var app=angular.module("home",["ngRoute","home.modules-all","home.templates"]);app.config(["$routeProvider",function(e){e.when("/hometab",{templateUrl:"home/home-container.html"}).when("/stock/:id",{templateUrl:"details/details.html"}).when("/buy",{templateUrl:"pages/buy.html"}).when("/about",{templateUrl:"pages/about.html"}).otherwise({redirectTo:"/hometab"})}]),app.run(["Session",function(e){e.isAuthenticated()||e.redirectToLogin()}]),app.controller("SessionController",["$scope",function(e){e.home="home of the application"}]),angular.module("home.container",[]),angular.module("home.top-nav",[]),angular.module("home.templates",[]),angular.module("home.stock-item",[]),angular.module("home.details",[]),angular.module("home.stock-service",[]),angular.module("home.utils",[]),angular.module("home.modules-all",["home.container","home.top-nav","home.stock-item","home.details","home.stock-service","home.utils"]),angular.module("home.details").controller("detailsController",["$templateCache",function(e){}]),angular.module("home.container").controller("homeController",["$scope","$templateCache","stockService","$interval",function(e,t,o,n){e.getStocks=function(){o.getStocks(function(t){e.stocks=t},function(t){e.message="unable to fetch"})},n(function(){e.fetchStocks()},6e4),e.fetchStocks=function(){n(function(){e.getStocks()},1e4,3)}}]),angular.module("home.stock-service").service("stockService",["http",function(e){this.getStocks=function(t,o){var n={url:"/api/getStocks"};e.get(n).then(function(e){t(e)})["catch"](function(e){return 404===e.code?void t([]):void o(e)})}}]),angular.module("home.stock-item").directive("stockItem",["$templateCache",function(e){return{restrict:"E",replace:!0,scope:{stock:"="},template:e.get("stocks/stock-item.html"),controller:["$rootScope","$scope","$interval",function(e,t,o){switch(t.backgroundImg="",t.amzStockPrice="70.8USD",t.stock.code){case"amz":t.backgroundImg="amazon-logo.png";break;case"fb":t.backgroundImg="facebook-logo.png";break;case"yh":t.backgroundImg="Yahoo_Logo.png";break;case"hp":t.backgroundImg="hp.png";break;case"ik":t.backgroundImg="2000px-Ikea_logo.svg.png"}}]}}]),angular.module("home.top-nav").directive("topNav",["$templateCache",function(e){return{restrict:"E",template:e.get("top-nav/top-nav.html"),controller:["$rootScope","$scope","$location","Session",function(e,t,o,n){t.click=function(e){o.path(e)},t.signOut=function(){n.logout(),n.redirectToLogin()}}]}}]),angular.module("home.utils").service("$cookies",function(){function e(e,t,o){var n="";if(o){var r=new Date;r.setTime(r.getTime()+o),n="; expires="+r.toGMTString()}document.cookie=e+"="+t+n+"; path=/"}function t(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function o(t){e(t,"",-1)}this.set=e,this.get=t,this.clear=o}),angular.module("home.utils").service("http",["$q","$http","$rootScope",function(e,t,o){var n=function(n,r,a,c){var i=e.defer(),u=(new Date).getTime();return c=c||{},t({method:r,url:n,headers:c,data:a,timeout:2e7}).success(function(e){i.resolve(e)}).error(function(e,t,n,r){var a=(new Date).getTime()-u;a>=r.timeout&&o.$broadcast("httpRequestTimeout");var c={status:0,data:"Service Timeout"};e=e||c,401!==e.code&&i.reject(e)}),i.promise};this.get=function(e){return n(e.url,"GET",null)},this.post=function(e,t){return n(e.url,"POST",e.payLoad)},this["delete"]=function(e){return n(e.url,"DELETE",null)},this.put=function(e,t){return n(e.url,"PUT",e.payLoad)}}]),angular.module("home.utils").factory("Session",["$cookies","$window",function(e,t){function o(){return e.get("key")?e.get("key"):null}function n(){return null!==o()&&"empty"!==o()}function r(){t.location.href="/login?error=Session expired."}function a(){e.clear("key")}return{getKey:o,isAuthenticated:n,redirectToLogin:r,logout:a}}]);