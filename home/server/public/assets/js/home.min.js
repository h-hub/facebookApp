var app=angular.module("home",["ngRoute","home.modules-all","home.templates"]);app.config(["$routeProvider",function(e){e.when("/hometab",{templateUrl:"home/home-container.html"}).when("/stock/:id",{templateUrl:"details/details.html"}).otherwise({redirectTo:"/hometab"})}]),app.run(["Session",function(e){e.isAuthenticated()||e.redirectToLogin()}]),app.controller("SessionController",["$scope",function(e){e.home="home of the application"}]),angular.module("home.container",[]),angular.module("home.top-nav",[]),angular.module("home.templates",[]),angular.module("home.stock-item",[]),angular.module("home.details",[]),angular.module("home.stock-service",[]),angular.module("home.utils",[]),angular.module("home.modules-all",["home.container","home.top-nav","home.stock-item","home.details","home.stock-service","home.utils"]),angular.module("home.details").controller("detailsController",["$templateCache",function(e){}]),angular.module("home.container").controller("homeController",["$scope","$templateCache","stockService","$interval",function(e,o,t,n){e.getStocks=function(){t.getStocks(function(o){console.log(o),e.stocks=o},function(o){console.log(o),e.message="unable to fetch"})},n(function(){e.fetchStocks()},6e4),e.fetchStocks=function(){console.log("start"),n(function(){e.getStocks()},1e4,3)}}]),angular.module("home.stock-service").service("stockService",["http",function(e){this.getStocks=function(o,t){var n={url:"/api/getStocks"};e.get(n).then(function(e){o(e)})["catch"](function(e){return 404===e.code?void o([]):void t(e)})}}]),angular.module("home.top-nav").directive("topNav",["$templateCache",function(e){return{restrict:"E",template:e.get("top-nav/top-nav.html"),controller:["$rootScope","$scope",function(e,o){}]}}]),angular.module("home.stock-item").directive("stockItem",["$templateCache",function(e){return{restrict:"E",replace:!0,scope:{stock:"="},template:e.get("stocks/stock-item.html"),controller:["$rootScope","$scope","$interval",function(e,o,t){switch(console.log(o.stock.code),o.backgroundImg="",o.amzStockPrice="70.8USD",o.stock.code){case"amz":o.backgroundImg="amazon-logo.png";break;case"fb":o.backgroundImg="facebook-logo.png";break;case"yh":o.backgroundImg="Yahoo_Logo.png";break;case"hp":o.backgroundImg="hp.png";break;case"ik":o.backgroundImg="2000px-Ikea_logo.svg.png"}}]}}]),angular.module("home.utils").service("$cookies",function(){function e(e,o,t){var n="";if(t){var r=new Date;r.setTime(r.getTime()+t),n="; expires="+r.toGMTString()}document.cookie=e+"="+o+n+"; path=/"}function o(e){for(var o=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(o))return r.substring(o.length,r.length)}return null}function t(o){e(o,"",-1)}this.set=e,this.get=o,this.clear=t}),angular.module("home.utils").service("http",["$q","$http","$rootScope",function(e,o,t){var n=function(n,r,c,a){var i=e.defer(),l=(new Date).getTime();return a=a||{},o({method:r,url:n,headers:a,data:c,timeout:2e7}).success(function(e){i.resolve(e)}).error(function(e,o,n,r){var c=(new Date).getTime()-l;c>=r.timeout&&t.$broadcast("httpRequestTimeout");var a={status:0,data:"Service Timeout"};e=e||a,401!==e.code&&i.reject(e)}),i.promise};this.get=function(e){return n(e.url,"GET",null)},this.post=function(e,o){return n(e.url,"POST",e.payLoad)},this["delete"]=function(e){return n(e.url,"DELETE",null)},this.put=function(e,o){return n(e.url,"PUT",e.payLoad)}}]),angular.module("home.utils").factory("Session",["$cookies","$window",function(e,o){function t(){return e.get("key")?e.get("key"):null}function n(){return null!==t()&&"empty"!==t()}function r(){o.location.href="/login?error=Session expired."}function c(){e.clear("key")}return{getKey:t,isAuthenticated:n,redirectToLogin:r,logout:c}}]);